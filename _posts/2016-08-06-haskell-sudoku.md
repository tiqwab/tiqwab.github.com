---
layout: post
title:  "Haskellで数独solver"
tags: "haskell"
---

Haskellの練習がてら数独solverを作成しました。  

発端は読み進め中の[関数プログラミング実践入門][2]に数独solverのコードがあり、それを見る前に自分で書いてみたいと思ったからなのですが、やってみると自身の力不足を痛感しました。Haskellとしての書き方ももっと明快に書けないかと思うのですが、何より数独の解法が間違っている(というか不足している)ようです。  

自分のアプローチでは

- 各マスに埋められる数字を一覧にする(よくあるメモ書き的なイメージ)
- 各Row, Column, Box(3x3の領域)に同じ数字は2度出現しないことから選択肢を減らす

という繰り返しでマスを埋めていました。これで確認する限りの数独は解けていたのでオッケーだと思っていたのですが、どうやら問題によっては「仮置き」、つまりあるマスにとりあえず数字を入れてみて探索を続けるという操作が必要になるみたいです。(実際自身のコードでは「[世界一難しい数独][3]」と称されるものを解くことはできませんでした)  

[関数プログラミング実践入門][2]のコードでは「候補の少ないマスに数字を入れて探索を続ける」というような内容になっており、やはりそういったロジックが必要になるようです。Haskellの実装ではListモナドで深さ優先探索を端的に実装でき、なるほどという感じです。  

上述したように現在のコードでは不十分な点があるのですが、コード全体は[gist][1]に。

[1]: https://gist.github.com/0e2a79ad108dc93216b77e271b635f81
[2]: https://www.amazon.co.jp/%E9%96%A2%E6%95%B0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E5%AE%9F%E8%B7%B5%E5%85%A5%E9%96%80-%E2%94%80%E2%94%80%E7%B0%A1%E6%BD%94%E3%81%A7%E3%80%81%E6%AD%A3%E3%81%97%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%9F%E3%82%81%E3%81%AB-WEB-PRESS-plus/dp/4774169269
[3]: http://rocketnews24.com/2012/07/03/22654/
